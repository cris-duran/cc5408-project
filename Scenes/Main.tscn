[gd_scene load_steps=22 format=3 uid="uid://ki01rvarfvr6"]

[ext_resource type="ArrayMesh" uid="uid://drj51xvx3pvok" path="res://Assets/3dModels/Terrain_test.obj" id="1_p32dt"]
[ext_resource type="PackedScene" uid="uid://d4ls43nckhuyh" path="res://Scenes/Character.tscn" id="2_661i2"]
[ext_resource type="Texture2D" uid="uid://15hv0l8yroj" path="res://icon.svg" id="2_silj6"]
[ext_resource type="PackedScene" uid="uid://bgecweg2wcwsv" path="res://Scenes/Terrain_body.tscn" id="3_2ubke"]
[ext_resource type="PackedScene" uid="uid://cbnwlklbclh8o" path="res://Scenes/Pause.tscn" id="4_6qjmq"]
[ext_resource type="PackedScene" uid="uid://4modn5t8x07o" path="res://Scenes/enemy_1.tscn" id="5_r7n5d"]
[ext_resource type="PackedScene" uid="uid://dlj8ku0okq4x0" path="res://Scenes/defeat_menu.tscn" id="6_382av"]
[ext_resource type="PackedScene" uid="uid://fbrli2jl2qgb" path="res://Scenes/Victory_menu.tscn" id="7_l58jm"]
[ext_resource type="PackedScene" uid="uid://bocsliy0c5rdp" path="res://Scenes/test_map.tscn" id="9_5paos"]
[ext_resource type="Script" path="res://Assets/Scripts/test_map.gd" id="10_gqelv"]
[ext_resource type="Script" path="res://Assets/Scripts/win.gd" id="11_vrujj"]
[ext_resource type="MeshLibrary" uid="uid://cucgm1fk33cj1" path="res://tiles.tres" id="12_3711l"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_u23il"]
albedo_color = Color(1, 0.2, 0.156863, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_2twsp"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_p6dq3"]
albedo_color = Color(5.05373e-06, 0.54394, 0.543967, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_2ll66"]
shading_mode = 0
albedo_color = Color(0.305882, 1, 0.509804, 1)
albedo_texture = ExtResource("2_silj6")

[sub_resource type="BoxShape3D" id="BoxShape3D_gbhe2"]
size = Vector3(32.7657, 0.656708, 39.3145)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_mv7tc"]
albedo_color = Color(0.533333, 0.537255, 1, 1)
albedo_texture = ExtResource("2_silj6")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ve0xn"]
albedo_color = Color(0.321569, 0.572549, 1, 1)
albedo_texture = ExtResource("2_silj6")

[sub_resource type="BoxShape3D" id="BoxShape3D_2t8uo"]
size = Vector3(1.39917, 5.12415, 1.96783)

[sub_resource type="BoxShape3D" id="BoxShape3D_kj26k"]
size = Vector3(27.6855, 1.39148, 38.0812)

[node name="Node3D" type="Node3D"]

[node name="RigidBody3D" type="RigidBody3D" parent="."]
transform = Transform3D(0.92519, 0.378963, -0.0202757, -0.321995, 0.812141, 0.486565, 0.200857, -0.443637, 0.873409, -0.134602, 0.834231, -0.0845532)
collision_layer = 3
collision_mask = 3

[node name="TerrainTest" type="MeshInstance3D" parent="RigidBody3D"]
transform = Transform3D(0.510959, 0, 0, 0, 0.510959, 0, 0, 0, 0.510959, 0, 0, 0)
mesh = ExtResource("1_p32dt")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_u23il")

[node name="CollisionShape3D" type="CollisionShape3D" parent="RigidBody3D"]
shape = SubResource("BoxShape3D_2twsp")

[node name="RigidBody3D2" type="RigidBody3D" parent="."]
transform = Transform3D(0.925189, 0.378964, -0.0202762, -0.321995, 0.812142, 0.486564, 0.200857, -0.443635, 0.873409, -3.70208, 8.71137, 6.3439)
collision_layer = 3
collision_mask = 3

[node name="TerrainTest" type="MeshInstance3D" parent="RigidBody3D2"]
transform = Transform3D(0.510959, 0, 0, 0, 0.510959, 0, 0, 0, 0.510959, 0, 0, 0)
mesh = ExtResource("1_p32dt")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_p6dq3")

[node name="CollisionShape3D" type="CollisionShape3D" parent="RigidBody3D2"]
shape = SubResource("BoxShape3D_2twsp")

[node name="Floor1" type="StaticBody3D" parent="."]
collision_layer = 3
collision_mask = 3

[node name="TerrainTest" type="MeshInstance3D" parent="Floor1"]
transform = Transform3D(16.4647, 0, 0, 0, 0.36049, 0, 0, 0, 19.545, 0.506085, -0.91384, 0.167058)
mesh = ExtResource("1_p32dt")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_2ll66")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Floor1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.538374, -0.908249, 0.165268)
shape = SubResource("BoxShape3D_gbhe2")

[node name="CharacterBody3D" parent="." instance=ExtResource("2_661i2")]
transform = Transform3D(-0.00630057, 0, 0.99998, 0, 1, 0, -0.99998, 0, -0.00630057, -0.0748234, 2.94629, 11.936)
gravity_scale = 2.0

[node name="RayCastDown" type="RayCast3D" parent="CharacterBody3D"]
target_position = Vector3(0, -3, 0)

[node name="Structures" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 15.752, 0)
collision_layer = 3
collision_mask = 3

[node name="TerrainTest" type="MeshInstance3D" parent="Structures"]
transform = Transform3D(0.696923, 0, 0, 0, 5.65922, 0, 0, 0, 1, 6.15868, -0.579895, 4.48915)
mesh = ExtResource("1_p32dt")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_mv7tc")

[node name="TerrainTest2" type="MeshInstance3D" parent="Structures"]
transform = Transform3D(-3.04635e-08, 13.8583, 0, -0.696923, -6.05763e-07, 0, 0, 0, 19.0289, 3.49781, 6.79151, 4.48778)
mesh = ExtResource("1_p32dt")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_ve0xn")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Structures"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.15778, 1.79059, 4.4869)
shape = SubResource("BoxShape3D_2t8uo")

[node name="CollisionShape3D2" type="CollisionShape3D" parent="Structures"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.46555, 6.8042, 4.44523)
visible = false
shape = SubResource("BoxShape3D_kj26k")

[node name="TerrainBody" parent="." instance=ExtResource("3_2ubke")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7, 2, 10)

[node name="Pause" parent="." instance=ExtResource("4_6qjmq")]

[node name="Enemy_1" parent="." instance=ExtResource("5_r7n5d")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 30.3337, 8.35456, -1.72165)

[node name="Defeat_menu" parent="." instance=ExtResource("6_382av")]
visible = false

[node name="Victory_menu" parent="." instance=ExtResource("7_l58jm")]
visible = false

[node name="TestMap" parent="." instance=ExtResource("9_5paos")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -14.9553, 0.366032, -1.79234)
script = ExtResource("10_gqelv")

[node name="win" parent="." instance=ExtResource("5_r7n5d")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 104.535, 14.0317, -1.5796)
script = ExtResource("11_vrujj")

[node name="GridMap" type="GridMap" parent="."]
mesh_library = ExtResource("12_3711l")
cell_size = Vector3(5, 5, 5)
cell_scale = 5.0
collision_layer = 3
collision_mask = 3
data = {
"cells": PackedInt32Array(65535, 65533, 6, 1, 65533, 4, -65540, 65532, 4, -65540, 65533, 4, -65540, 65534, 4, -65540, 65535, 4, -65540, 0, 4, -65540, 1, 4, -65540, 2, 4, -65540, 3, 4, -65541, 3, 4, -65542, 3, 4, -65543, 3, 4, -65544, 3, 4, -65545, 3, 4, -65546, 3, 4, -65547, 3, 4, -65548, 3, 4, -65548, 2, 4, -65548, 1, 4, -65549, 0, 4, -65549, 65535, 4, -65549, 65534, 4, -65549, 65533, 4, -65549, 65532, 4, -65548, 65532, 4, -65547, 65532, 4, -65546, 65532, 4, -65545, 65532, 4, -65544, 65532, 4, -65543, 65532, 4, -65542, 65532, 4, -65541, 65532, 4, -65541, 65533, 4, -65541, 65534, 4, -65541, 65535, 4, -65541, 0, 4, -65541, 1, 4, -65541, 2, 4, -65542, 2, 4, -65543, 2, 4, -65544, 2, 4, -65545, 2, 4, -65546, 2, 4, -65547, 2, 4, -65549, 1, 4, -65549, 2, 4, -65549, 3, 4, -65548, 0, 4, -65547, 0, 4, -65546, 0, 4, -65545, 0, 4, -65544, 0, 4, -65543, 0, 4, -65543, 65535, 4, -65542, 65535, 4, -65542, 65533, 4, -65543, 65533, 4, -65544, 65533, 4, -65545, 65533, 4, -65546, 65533, 4, -65547, 65533, 4, -65548, 65533, 4, -65548, 65534, 4, -65548, 65535, 4, -65547, 1, 4, -65546, 1, 4, -65543, 1, 4, -65542, 0, 4, -65543, 65534, 4, -65546, 65534, 4, -65547, 65534, 4, -65547, 65535, 4, -65542, 1, 4, -65544, 65534, 4, -65545, 65534, 4, -65546, 65535, 4, -65545, 1, 4, -65544, 1, 4, -65545, 65535, 4, -65542, 65534, 4, -65544, 65535, 4, -65540, 4, 4, -65541, 4, 4, -65542, 4, 4, -65543, 4, 4, -65544, 4, 4, -65545, 4, 4, -65546, 4, 4, -65547, 4, 4, -65548, 4, 4, -65549, 4, 4, -65540, 65531, 4, -65541, 65531, 4, -65542, 65531, 4, -65543, 65531, 4, -65544, 65531, 4, -65545, 65531, 4, -65546, 65531, 4, -65547, 65531, 4, -65548, 65531, 4, -65549, 65531, 4, -65550, 65531, 4, -65550, 65532, 4, -65550, 65533, 4, -65550, 65534, 4, -65550, 65535, 4, -65550, 0, 4, -65550, 1, 4, -65550, 2, 4, -65550, 3, 4, -65550, 4, 4, -5, 65531, 3, -7, 65531, 3, -8, 65531, 3, -11, 65531, 3, -14, 65533, 3, -14, 0, 3, -14, 1, 3, -13, 4, 3, -14, 4, 3, -14, 65531, 3, -4, 65531, 3, -4, 4, 3, -8, 4, 3, -4, 65534, 3, -4, 2, 3, -5, 4, 3, -14, 3, 3, -6, 65531, 12, -14, 2, 12, -6, 4, 12, -14, 65532, 12, -7, 4, 12, -12, 4, 8, -10, 4, 8, -14, 65534, 1441800, -12, 65531, 655368, -9, 65531, 655368, -4, 65533, 1048584, -4, 3, 1048588, 65522, 65531, 1048576, 65532, 65531, 1048576, 65532, 4, 1048576, 65522, 4, 1441792, 65524, 4, 1048576, 65526, 4, 1048576, 65527, 4, 1048576, 65531, 4, 1048576, 65526, 65531, 1048576, 65525, 65531, 1048576, 65523, 65531, 1048576, 65527, 65531, 1048576, 65522, 65534, 1048576, 65522, 65535, 1048576, 65522, 0, 1048576, 65528, 65531, 5, 65532, 65533, 1441797, 65531, 65531, 1441793, 65522, 3, 1441792, 65523, 4, 1441792, 65525, 4, 1441801, 65528, 4, 1441801, 65522, 1, 1441801, 65522, 65533, 1441801, 65524, 65531, 1441801, 65532, 2, 1441801, 65532, 65532, 1441801, 131058, 65531, 1441792, 131068, 65531, 1441792, 131068, 4, 1441792, 131058, 4, 1441792, 131058, 0, 1441792, 131059, 65531, 1441792, 131058, 65532, 1441792, 131062, 4, 1441792, 131063, 4, 1441792, 131066, 4, 1441792, 131067, 4, 1441792, 131058, 2, 1441797, 131058, 65534, 1441797, 131060, 4, 655365, 131062, 65531, 655365, 131064, 65531, 655365, 131067, 65531, 655365, 131068, 65534, 1048581, 131065, 65531, 1048585, 131065, 4, 1048586, 131068, 3, 1048585, 196604, 65531, 1048576, 196594, 65531, 1048576, 196594, 4, 1048576, 196604, 4, 1048576, 196602, 4, 1048576, 196599, 4, 1048576, 196598, 4, 1048576, 196594, 65533, 1048576, 196594, 65534, 1048576, 196594, 65535, 1048576, 196594, 0, 1048576, 196594, 3, 1048576, 196596, 65531, 1048576, 196599, 65531, 1048576, 196602, 65531, 1048576, 196603, 65531, 1048576, 196604, 65532, 1048576, 196604, 65533, 1048576, 196604, 2, 1048576, 196604, 65534, 1048585, 196595, 65531, 1048585, 196594, 65532, 1048585, 196600, 4, 1048585, 196603, 4, 1048585, 196595, 4, 1048585, 196594, 2, 1048581, 196597, 65531, 5, 196596, 4, 5, 196600, 65531, 2, 262140, 1, 1441797, 262140, 65535, 1441797, 262130, 0, 1441797, 262138, 65531, 655365, 262133, 65531, 655365, 262130, 65535, 655371, 262130, 65531, 655360, 262140, 65531, 655360, 262140, 4, 655360, 262130, 4, 655360, 262133, 4, 655360, 262134, 4, 655360, 262138, 4, 655365, 262130, 3, 1048581, 262130, 65533, 1048576, 262130, 65534, 1048576, 262135, 65531, 1048576, 262134, 65531, 1048585, 262136, 65531, 1048585, 262139, 65531, 1048585, 262140, 65532, 1048576, 262140, 65533, 1048576, 262140, 3, 1048585, 262135, 4, 1048585, 262132, 4, 1048585, 327666, 65531, 1048585, 327671, 65531, 1048576, 327676, 65531, 1048576, 327676, 4, 1048576, 327666, 4, 1048576, 327666, 2, 1048576, 327666, 3, 1048576, 327669, 4, 1048576, 327673, 4, 1048576, 327672, 4, 1048576, 327669, 65531, 1048576, 327666, 1, 1048581, 327676, 65535, 1048581, 327676, 1, 1048581, 327676, 65532, 1048576, 327676, 65533, 1048576, 327676, 2, 1048585, 327670, 4, 1048585, 327667, 4, 1048585, 327674, 4, 5, 327667, 65531, 5, 327673, 65531, 5, 393202, 65535, 0, 393202, 0, 0, 393202, 1, 0, 393205, 65531, 0, 393206, 65531, 0, 393208, 65531, 0, 393209, 65531, 0, 393212, 65531, 0, 393212, 65532, 0, 393212, 65533, 0, 393212, 4, 0, 393202, 4, 0, 393209, 4, 0, 393207, 4, 0, 393208, 4, 0, 393210, 4, 5, 393210, 65531, 5, 393203, 65531, 7, 393204, 4, 6, 393207, 65531, 9, 393202, 2, 9, 393202, 3, 9, 393212, 3, 9, 393212, 1, 9, 393212, 65534, 0, 393212, 65535, 1441797, 458748, 65534, 1441798, 458748, 4, 1441792, 458748, 65531, 1441792, 458748, 2, 1441792, 458748, 1, 1441792, 458748, 0, 1441792, 458748, 65532, 1441792, 458748, 65533, 1441792, 458747, 65531, 1441792, 458746, 65531, 1441792, 458745, 65531, 1441792, 458744, 65531, 1441792, 458743, 65531, 1441792, 458742, 65531, 1441792, 458741, 65531, 1441792, 458740, 65531, 1441792, 458739, 65531, 1441792, 458738, 65531, 1441792, 458738, 65532, 1441797, 458740, 4, 655365, 458745, 4, 655365, 458738, 65534, 655360, 458738, 65535, 655360, 458738, 0, 655360, 458738, 1, 655360, 458738, 4, 655360, 458741, 4, 655360, 458742, 4, 655360, 458743, 4, 655360, 458746, 4, 655360, 458747, 4, 655360, 524281, 4, 524291, 524280, 4, 524291, 524279, 4, 524291, 524278, 4, 524291, 524280, 65531, 524291, 524279, 65531, 524291, 524278, 65531, 524291, 524277, 65531, 524291, 524276, 65531, 524291, 524274, 65532, 524291, 524274, 65531, 524291, 524284, 65531, 524291, 524284, 4, 524291, 524274, 4, 524291, 524274, 0, 524291, 524274, 65535, 524291, 524275, 4, 524291, 524274, 3, 524291, 524284, 65533, 524291, 524284, 65534, 524291, 524284, 0, 524291, 524284, 1, 524291, 524284, 65535, 524291, 524284, 65532, 524291, 524283, 65531, 524291, 524282, 4, 524296, 524276, 4, 524296, 524281, 65531, 524296, 524284, 2, 1310728, 524274, 65533, 1310728, 524274, 1, 1310728, 524275, 65531, 1310723, 589820, 65531, 1310724, 589819, 65531, 1310724, 589818, 65531, 1310724, 589817, 65531, 1310724, 589816, 65531, 1310724, 589815, 65531, 1310724, 589814, 65531, 1310724, 589813, 65531, 1310724, 589812, 65531, 1310724, 589811, 65531, 1310724, 589810, 65531, 1310724, 589820, 65532, 1310724, 589820, 65533, 1310724, 589820, 65534, 1310724, 589820, 65535, 1310724, 589820, 0, 1310724, 589820, 1, 1310724, 589820, 2, 1310724, 589820, 3, 1310724, 589820, 4, 1310724, 589819, 4, 1310724, 589818, 4, 1310724, 589817, 4, 1310724, 589816, 4, 1310724, 589815, 4, 1310724, 589814, 4, 1310724, 589813, 4, 1310724, 589812, 4, 1310724, 589811, 4, 1310724, 589810, 4, 1310724, 589810, 3, 1310724, 589810, 2, 1310724, 589810, 1, 1310724, 589810, 0, 1310724, 589810, 65535, 1310724, 589810, 65534, 1310724, 589810, 65533, 1310724, 589810, 65532, 1310724, 589811, 65532, 1310724, 589812, 65532, 1310724, 589813, 65532, 1310724, 589814, 65532, 1310724, 589815, 65532, 1310724, 589816, 65532, 1310724, 589817, 65532, 1310724, 589818, 65532, 1310724, 589819, 65532, 1310724, 589819, 65533, 1310724, 589819, 65534, 1310724, 589819, 65535, 1310724, 589819, 0, 1310724, 589819, 1, 1310724, 589819, 2, 1310724, 589818, 2, 1310724, 589817, 1, 1310724, 589817, 0, 1310724, 589817, 65535, 1310724, 589817, 65534, 1310724, 589817, 65533, 1310724, 589816, 65533, 1310724, 589816, 65534, 1310724, 589815, 65535, 1310724, 589815, 0, 1310724, 589814, 1, 1310724, 589814, 2, 1310724, 589814, 0, 1310724, 589813, 65535, 1310724, 589813, 65534, 1310724, 589813, 65533, 1310724, 589812, 0, 1310724, 589812, 1, 1310724, 589812, 2, 1310724, 589812, 65535, 1310724, 589812, 65534, 1310724, 589811, 65534, 1310724, 589811, 65533, 1310724, 589811, 65535, 1310724, 589811, 0, 1310724, 589811, 1, 1310724, 589811, 2, 1310724, 589812, 3, 1310724, 589813, 3, 1310724, 589814, 3, 1310724, 589815, 3, 1310724, 589816, 3, 1310724, 589817, 3, 1310724, 589818, 3, 1310724, 589819, 3, 1310724, 589816, 1, 1310724, 589816, 0, 1310724, 589813, 1, 1310724, 589811, 3, 1310724, 589813, 2, 1310724, 589815, 2, 1310724, 589816, 2, 1310724, 589817, 2, 1310724, 589818, 1, 1310724, 589815, 1, 1310724, 589814, 65535, 1310724, 589816, 65535, 1310724, 589818, 65535, 1310724, 589818, 65534, 1310724, 589818, 65533, 1310724, 589815, 65534, 1310724, 589814, 65534, 1310724, 589814, 65533, 1310724, 589815, 65533, 1310724, 589813, 0, 1310724, 589818, 0, 1310724, 589812, 65533, 1310724, 65530, 65534, 1310721, 65525, 2, 1310729, 262139, 3, 1310731, 262133, 65532, 1310722, 196599, 65535, 1310727)
}
metadata/_editor_floor_ = Vector3(0, 2, 0)

[connection signal="player_death" from="CharacterBody3D" to="Defeat_menu" method="_on_character_body_3d_player_death"]
[connection signal="player_win" from="CharacterBody3D" to="Victory_menu" method="_on_character_body_3d_player_win"]
[connection signal="enemy_killed" from="Enemy_1" to="CharacterBody3D" method="_on_enemy_1_enemy_killed"]
[connection signal="win" from="TestMap" to="CharacterBody3D" method="_on_test_map_win"]
[connection signal="win" from="win" to="CharacterBody3D" method="_on_win"]
